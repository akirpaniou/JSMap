<html>
<head>
<style type="text/css">
#mapa { height: 600px; }
</style>
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css">
 <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
</head>
<body>

<div id="mapa">
</div>
<button id="ala"> alala</button>
<div id="sla">cos</div>
<script type="text/javascript">
	var a=document.querySelector('#sla');


	
	
	document.querySelector('#ala').addEventListener('click', function() 
	{
	var r= new XMLHttpRequest();										
	r.open('GET','https://jsonplaceholder.typicode.com/users');
	
		r.onload=function(){
		var data=JSON.parse(r.responseText);
		
		
		var mymap = L.map('mapa').setView([-43.9509, -34.4618], 20);
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);
		
		

		
			
			var i = 0;
			while (i<10){

			L.marker([data[i].address.geo.lat, data[i].address.geo.lng]).addTo(mymap)
			.bindPopup("<b> Imie: </b>"+data[i].name+ "<b> Nazwisko: </b> " +data[i].username + "</br> Adres:  " + data[i].address.street + " " + data[i].address.suite + " " + data[i].address.city ).openPopup();
			
			i++;

			}


		};

	r.send();


	});

	


</script>


</body>
</html>